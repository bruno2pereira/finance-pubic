import{h as ee,d as te,e as L}from"./QSelect-BjkDlDNQ.js";import{g as w,r as P,a as V,a5 as le,a6 as A,a7 as ne,h as D,c as J,a8 as ae,a9 as ue,aa as oe,ab as ie,ac as se,ad as re,ae as W,af as ce,ag as de,ah as fe,ai as me,aj as ve,e as ge,b as pe,ak as be,j as ye,al as he,D as Se,am as Fe,N as Ve,o as Ce,S as xe,an as Pe,R,P as N,a2 as qe,a3 as ze,W as Y,U as Ie,ao as K,Q as G,Z as Ne}from"./index-BUje8jDk.js";import{u as $e}from"./vue-i18n.runtime-CNg-IAyb.js";function B(e,m,y,h){const u=[];return e.forEach(d=>{h(d)===!0?u.push(d):m.push({failedPropValidation:y,file:d})}),u}function T(e){e&&e.dataTransfer&&(e.dataTransfer.dropEffect="copy"),A(e)}const De={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},ke=["rejected"];function je({editable:e,dnd:m,getFileInput:y,addFilesToQueue:h}){const{props:u,emit:d,proxy:r}=w(),S=P(null),C=V(()=>u.accept!==void 0?u.accept.split(",").map(t=>(t=t.trim(),t==="*"?"*/":(t.endsWith("/*")&&(t=t.slice(0,t.length-1)),t.toUpperCase()))):null),z=V(()=>parseInt(u.maxFiles,10)),I=V(()=>parseInt(u.maxTotalSize,10));function x(t){if(e.value)if(t!==Object(t)&&(t={target:null}),t.target!==null&&t.target.matches('input[type="file"]')===!0)t.clientX===0&&t.clientY===0&&le(t);else{const i=y();i&&i!==t.target&&i.click(t)}}function f(t){e.value&&t&&h(null,t)}function l(t,i,v,p){let o=Array.from(i||t.target.files);const b=[],$=()=>{b.length!==0&&d("rejected",b)};if(u.accept!==void 0&&C.value.indexOf("*/")===-1&&(o=B(o,b,"accept",c=>C.value.some(g=>c.type.toUpperCase().startsWith(g)||c.name.toUpperCase().endsWith(g))),o.length===0))return $();if(u.maxFileSize!==void 0){const c=parseInt(u.maxFileSize,10);if(o=B(o,b,"max-file-size",g=>g.size<=c),o.length===0)return $()}if(u.multiple!==!0&&o.length!==0&&(o=[o[0]]),o.forEach(c=>{c.__key=c.webkitRelativePath+c.lastModified+c.name+c.size}),p===!0){const c=v.map(g=>g.__key);o=B(o,b,"duplicate",g=>c.includes(g.__key)===!1)}if(o.length===0)return $();if(u.maxTotalSize!==void 0){let c=p===!0?v.reduce((g,Q)=>g+Q.size,0):0;if(o=B(o,b,"max-total-size",g=>(c+=g.size,c<=I.value)),o.length===0)return $()}if(typeof u.filter=="function"){const c=u.filter(o);o=B(o,b,"filter",g=>c.includes(g))}if(u.maxFiles!==void 0){let c=p===!0?v.length:0;if(o=B(o,b,"max-files",()=>(c++,c<=z.value)),o.length===0)return $()}if($(),o.length!==0)return o}function n(t){T(t),m.value!==!0&&(m.value=!0)}function s(t){A(t),(t.relatedTarget!==null||ne.is.safari!==!0?t.relatedTarget!==S.value:document.elementsFromPoint(t.clientX,t.clientY).includes(S.value)===!1)===!0&&(m.value=!1)}function k(t){T(t);const i=t.dataTransfer.files;i.length!==0&&h(null,i),m.value=!1}function j(t){if(m.value===!0)return D("div",{ref:S,class:`q-${t}__dnd absolute-full`,onDragenter:T,onDragover:T,onDragleave:s,onDrop:k})}return Object.assign(r,{pickFiles:x,addFiles:f}),{pickFiles:x,addFiles:f,onDragover:n,onDragleave:s,processFiles:l,getDndNode:j,maxFilesNumber:z,maxTotalSizeNumber:I}}const Qe=J({name:"QFile",inheritAttrs:!1,props:{...oe,...ue,...De,modelValue:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...ae,...ke],setup(e,{slots:m,emit:y,attrs:h}){const{proxy:u}=w(),d=ie(),r=P(null),S=P(!1),C=se(e),{pickFiles:z,onDragover:I,onDragleave:x,processFiles:f,getDndNode:l}=je({editable:d.editable,dnd:S,getFileInput:M,addFilesToQueue:_}),n=re(e),s=V(()=>Object(e.modelValue)===e.modelValue?"length"in e.modelValue?Array.from(e.modelValue):[e.modelValue]:[]),k=V(()=>W(s.value)),j=V(()=>s.value.map(a=>a.name).join(", ")),t=V(()=>ee(s.value.reduce((a,F)=>a+F.size,0))),i=V(()=>({totalSize:t.value,filesNumber:s.value.length,maxFiles:e.maxFiles})),v=V(()=>({tabindex:-1,type:"file",title:"",accept:e.accept,capture:e.capture,name:C.value,...h,id:d.targetUid.value,disabled:d.editable.value!==!0})),p=V(()=>"q-file q-field--auto-height"+(S.value===!0?" q-file--dnd":"")),o=V(()=>e.multiple===!0&&e.append===!0);function b(a){const F=s.value.slice();F.splice(a,1),c(F)}function $(a){const F=s.value.indexOf(a);F!==-1&&b(F)}function c(a){y("update:modelValue",e.multiple===!0?a:a[0])}function g(a){a.keyCode===13&&fe(a)}function Q(a){(a.keyCode===13||a.keyCode===32)&&z(a)}function M(){return r.value}function _(a,F){const q=f(a,F,s.value,o.value),O=M();O!=null&&(O.value=""),q!==void 0&&((e.multiple===!0?e.modelValue&&q.every(Z=>s.value.includes(Z)):e.modelValue===q[0])||c(o.value===!0?s.value.concat(q):q))}function E(){return[D("input",{class:[e.inputClass,"q-file__filler"],style:e.inputStyle})]}function X(){if(m.file!==void 0)return s.value.length===0?E():s.value.map((F,q)=>m.file({index:q,file:F,ref:this}));if(m.selected!==void 0)return s.value.length===0?E():m.selected({files:s.value,ref:this});if(e.useChips===!0)return s.value.length===0?E():s.value.map((F,q)=>D(te,{key:"file-"+q,removable:d.editable.value,dense:!0,textColor:e.color,tabindex:e.tabindex,onRemove:()=>{b(q)}},()=>D("span",{class:"ellipsis",textContent:F.name})));const a=e.displayValue!==void 0?e.displayValue:j.value;return a.length!==0?[D("div",{class:e.inputClass,style:e.inputStyle,textContent:a})]:E()}function H(){const a={ref:r,...v.value,...n.value,class:"q-field__input fit absolute-full cursor-pointer",onChange:_};return e.multiple===!0&&(a.multiple=!0),D("input",a)}return Object.assign(d,{fieldClass:p,emitValue:c,hasValue:k,inputRef:r,innerValue:s,floatingLabel:V(()=>k.value===!0||W(e.displayValue)),computedCounter:V(()=>{if(e.counterLabel!==void 0)return e.counterLabel(i.value);const a=e.maxFiles;return`${s.value.length}${a!==void 0?" / "+a:""} (${t.value})`}),getControlChild:()=>l("file"),getControl:()=>{const a={ref:d.targetRef,class:"q-field__native row items-center cursor-pointer",tabindex:e.tabindex};return d.editable.value===!0&&Object.assign(a,{onDragover:I,onDragleave:x,onKeydown:g,onKeyup:Q}),D("div",a,[H()].concat(X()))}}),Object.assign(u,{removeAtIndex:b,removeFile:$,getNativeElement:()=>r.value}),ce(u,"nativeEl",()=>r.value),de(d)}}),Be=J({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(e,{slots:m,emit:y}){const h=w(),u=P(null);let d=0;const r=[];function S(l){const n=typeof l=="boolean"?l:e.noErrorFocus!==!0,s=++d,k=(i,v)=>{y(`validation${i===!0?"Success":"Error"}`,v)},j=i=>{const v=i.validate();return typeof v.then=="function"?v.then(p=>({valid:p,comp:i}),p=>({valid:!1,comp:i,err:p})):Promise.resolve({valid:v,comp:i})};return(e.greedy===!0?Promise.all(r.map(j)).then(i=>i.filter(v=>v.valid!==!0)):r.reduce((i,v)=>i.then(()=>j(v).then(p=>{if(p.valid===!1)return Promise.reject(p)})),Promise.resolve()).catch(i=>[i])).then(i=>{if(i===void 0||i.length===0)return s===d&&k(!0),!0;if(s===d){const{comp:v,err:p}=i[0];if(p!==void 0&&console.error(p),k(!1,v),n===!0){const o=i.find(({comp:b})=>typeof b.focus=="function"&&be(b.$)===!1);o!==void 0&&o.comp.focus()}}return!1})}function C(){d++,r.forEach(l=>{typeof l.resetValidation=="function"&&l.resetValidation()})}function z(l){l!==void 0&&A(l);const n=d+1;S().then(s=>{n===d&&s===!0&&(e.onSubmit!==void 0?y("submit",l):l!==void 0&&l.target!==void 0&&typeof l.target.submit=="function"&&l.target.submit())})}function I(l){l!==void 0&&A(l),y("reset"),ye(()=>{C(),e.autofocus===!0&&e.noResetFocus!==!0&&x()})}function x(){he(()=>{if(u.value===null)return;const l=u.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||u.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||u.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(u.value.querySelectorAll("[tabindex]"),n=>n.tabIndex!==-1);l?.focus({preventScroll:!0})})}Se(Fe,{bindComponent(l){r.push(l)},unbindComponent(l){const n=r.indexOf(l);n!==-1&&r.splice(n,1)}});let f=!1;return me(()=>{f=!0}),ve(()=>{f===!0&&e.autofocus===!0&&x()}),ge(()=>{e.autofocus===!0&&x()}),Object.assign(h.proxy,{validate:S,resetValidation:C,submit:z,reset:I,focus:x,getValidationComponents:()=>r}),()=>D("form",{class:"q-form",ref:u,onSubmit:z,onReset:I},pe(m.default))}});function Ee(){return Math.floor(Math.random()*1e7)+1}var U=(e=>(e[e.Investment=0]="Investment",e[e.Savings=1]="Savings",e[e.Checking=2]="Checking",e))(U||{});const Re={class:"text-h6"},Oe=Ve({__name:"one-new-account-dialog",setup(e){const m=P(!1),y=P(""),h=P(0),u=P(""),d=Ce(),{t:r}=$e(),S=P([{label:r("one.currency.EUR"),value:"EUR",simbol:"€"},{label:r("one.currency.USD"),value:"USD",simbol:"$"},{label:r("one.currency.BRL"),value:"BRL",simbol:"R$"},{label:r("one.currency.GBP"),value:"GBP",simbol:"£"},{label:r("one.currency.JPY"),value:"JPY",simbol:"¥"}]),C=P(S.value[0]||null),z=P([{label:r("one.accountType.investment"),value:U.Investment},{label:r("one.accountType.savings"),value:U.Savings},{label:r("one.accountType.checking"),value:U.Checking}]),I=()=>{const f={id:Ee(),accountName:y.value,initialValue:h.value,accountType:u.value,currency:C.value};d.addAccount(f),x(),m.value=!1},x=()=>{y.value="",h.value=0,u.value="",C.value=S.value[0]||null};return(f,l)=>(Ne(),xe(Pe,{modelValue:m.value,"onUpdate:modelValue":l[4]||(l[4]=n=>m.value=n)},{default:R(()=>[N(qe,{style:{"min-width":"550px"},square:""},{default:R(()=>[N(ze,null,{default:R(()=>[Y("div",Re,Ie(f.$t("one.newAccount")),1)]),_:1}),N(Be,{onSubmit:I,onReset:x,class:"q-gutter-md q-pl-md q-pr-md q-pb-md"},{default:R(()=>[N(K,{square:"",dense:"",filled:"",modelValue:y.value,"onUpdate:modelValue":l[0]||(l[0]=n=>y.value=n),label:f.$t("one.accountName"),hint:f.$t("one.accountNameHint"),"lazy-rules":"",rules:[n=>n&&n.length>0||f.$t("one.pleaseTypeSomething")]},null,8,["modelValue","label","hint","rules"]),N(K,{square:"",dense:"",filled:"",modelValue:h.value,"onUpdate:modelValue":l[1]||(l[1]=n=>h.value=n),label:f.$t("one.initialValue"),"lazy-rules":"",rules:[n=>n!==null&&n!==""||f.$t("one.pleaseTypeInitialValue"),n=>n>=0||f.$t("one.valueMustBePositive")]},null,8,["modelValue","label","rules"]),N(L,{square:"",dense:"",filled:"",modelValue:u.value,"onUpdate:modelValue":l[2]||(l[2]=n=>u.value=n),options:z.value,label:f.$t("one.accountType"),"lazy-rules":"",rules:[n=>n!=null||f.$t("one.pleaseSelectAccountType")]},null,8,["modelValue","options","label","rules"]),N(L,{square:"",dense:"",filled:"",modelValue:C.value,"onUpdate:modelValue":l[3]||(l[3]=n=>C.value=n),options:S.value,label:f.$t("one.currency"),"lazy-rules":"",rules:[n=>n!=null||f.$t("one.pleaseSelectCurrency")]},null,8,["modelValue","options","label","rules"]),Y("div",null,[N(G,{label:f.$t("one.submit"),type:"submit",color:"secondary"},null,8,["label"]),N(G,{label:f.$t("one.reset"),type:"reset",color:"secondary",flat:"",class:"q-ml-sm"},null,8,["label"])])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}});export{Qe as Q,Oe as _};
